$(document).ready(function(){var e=$.validator.methods.range;$.validator.methods.range=function(n,o,t){return"checkbox"===o.type?o.checked:e()}});var applicationModule=angular.module("application",[]),userNotificationsHub=$.connection.userNotificationsHub;$(function(){$.connection.hub.logging=!0,$.connection.hub.start()}),angular.module("application").value("userNotificationsHub",userNotificationsHub),$(function(){$('[data-toggle="popover"]').popover()}),applicationModule.controller("archivedEventsController",function(e,n,o){for(e.eventName="",e.yearList=[],i=2004;i<=(new Date).getFullYear();i++)e.yearList.push(i.toString());e.eventYear=(new Date).getFullYear().toString(),o.initializeMap("map",{zoom:4,center:{lat:40,lng:-98},mapTypeId:google.maps.MapTypeId.TERRAIN}),e.map=o.map,e.markers=o.markers,e.openInfoWindow=o.openInfoWindow,e.eventData=[],e.updateMap=function(){var t={EventName:e.eventName,EventYear:e.eventYear},a=n({method:"GET",url:"/api/Events/GetArchived",params:{filter:angular.toJson(t,!1)}});a.then(function(e){o.pushEventMarkers(e,!0)})},e.updateMap()}),applicationModule.controller("currentEventsController",function(e,n,o){o.initializeMap("map",{zoom:4,center:{lat:40,lng:-98},mapTypeId:google.maps.MapTypeId.TERRAIN}),e.map=o.map,e.markers=o.markers,e.openInfoWindow=o.openInfoWindow,e.eventData=[];var t=n.get("/api/Events/GetCurrent");t.then(function(e){o.pushEventMarkers(e,!1)})}),applicationModule.controller("hostsController",function(e,n){e.updateAbr=function(){var n=e.hostName.match(/\b(\w)/g);null!=n?(e.hostAbr=n.join("").toUpperCase(),e.hostShortName=n.join("").toLowerCase()):(e.hostAbr="",e.hostShortName="")}}),applicationModule.controller("userNotificationsController",function(e,n,o){n.get().then(function(n){e.boomMessage=n,e.newMessages=5}),o.client.handleUserNotification=function(n){e.boomMessage=n,e.$apply()},e.boom=function(){o.server.handleUserNotification(e.testValue)}}),applicationModule.factory("googleMap",[function(){var e,n=[],o=new google.maps.InfoWindow,t=function(n,o){e=new google.maps.Map(document.getElementById(n),o)},a=function(t){var a="EventDay"==t.Status?google.maps.Animation.BOUNCE:google.maps.Animation.DROP,i="/images/map/"+t.Status+".png",r='<div class="infoWindowContent">'+t.Name+"</div>",l=new google.maps.Marker({map:e,position:{lat:t.LocationLat,lng:t.LocationLng},animation:a,title:t.Name,icon:i,content:r});google.maps.event.addListener(l,"click",function(){o.setContent("<h2>"+l.title+"</h2>"+l.content),o.open(e,l)}),n.push(l)},i=function(e,o){if(o){for(var t=0;t<n.length;t++)n[t].setMap(null);n.length=0}for(var i in e.data)a(e.data[i])},r=function(e,n){e.preventDefault(),google.maps.event.trigger(n,"click")};return{map:e,markers:n,initializeMap:t,pushEventMarker:a,pushEventMarkers:i,openInfoWindow:r}}]),applicationModule.factory("notificationsService",function(e,n){return{get:function(){var o=n.defer();return e.get("/api/Notifications").success(o.resolve).error(o.reject),o.promise}}});